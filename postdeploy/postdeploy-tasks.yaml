heat_template_version: 2015-04-30


description: >
  multiple post-deployment scripts.

parameters:
  servers:
    type: json
  glance_nfs_export:
    type: string

resources:

  SomeExtraConfigScript:
    type: OS::Heat::SoftwareConfig
    properties:
      group: script
      inputs:
         - name: GLANCE_NFS_EXPORT
      config: {get_file: /root/tripleo/postdeploy/postdeploy-tasks.sh}

  SomeExtraConfig:
    type: OS::Heat::SoftwareDeployments
    properties:
      servers:  {get_param: servers}
      config: {get_resource: SomeExtraConfigScript}
      actions: ['CREATE', 'UPDATE']
      input_values:
         GLANCE_NFS_EXPORT: {get_param: glance_nfs_export}
